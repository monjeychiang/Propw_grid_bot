# PropW Bot 使用者手冊

歡迎使用 PropW 自動化網格交易機器人！本手冊將引導您完成從啟動到執行自動化交易的完整操作流程。

## 🎯 關於本專案

**PropW** 是一個加密貨幣交易考試平台 (Prop Trading Firm)，交易者需要通過平台的考核規則才能獲得正式交易資格。考核期間有嚴格的風控要求，包括最大虧損限制、每日虧損上限、獲利目標等。

本機器人採用 **網格交易策略**，透過自動化的低買高賣機制，在震盪行情中穩定累積利潤，幫助您：
- ✅ 通過 PropW 考核階段
- ✅ 考核通過後繼續使用，持續賺取收益

## 🚀 1. 系統啟動

### 啟動步驟

1. 進入專案目錄，雙擊執行 **`run_app.bat`**
2. 系統將開啟以下視窗：
   - **終端機視窗**: 顯示後端運作紀錄 (含時間戳)
   - **Chrome 瀏覽器**: 機器人控制的瀏覽器視窗
   - **前端介面**: 自動開啟 `http://localhost:5173`

> ⚠️ **重要提示**:
> - 請勿關閉機器人的 Chrome 視窗 (左上角標有 "Chrome is being controlled...")
> - 可將視窗最小化，但必須保持開啟

---

## 🔐 2. 登入交易所

### 新版登入流程 (v2.3.0)

1. **點擊登入按鈕**
   - 在前端介面右上角，點擊藍色的 **「LOGIN」** 按鈕
   - 系統會自動開啟 PropW 登入頁面

2. **手動完成登入**
   - 在機器人瀏覽器視窗中輸入帳號密碼
   - 完成驗證碼驗證 (如有)
   - 點擊登入按鈕

3. **自動偵測與跳轉**
   - 登入成功後，系統會在 **3 秒內** 偵測到登入狀態
   - 若停留在 Dashboard 或其他頁面，會 **自動跳轉** 回交易頁面
   - 前端右上角會顯示綠色 **「LOGGED IN」** 標籤

### 狀態指示

| 狀態 | 說明 |
|------|------|
| 🔴 OFFLINE | 機器人未啟動 |
| 🟢 ONLINE + LOGIN 按鈕 | 機器人運行中，尚未登入 |
| 🟢 ONLINE + LOGGED IN | 完全就緒，可以開始交易 |

---

## 🖥️ 3. 介面導覽

### 頂部導航列
- **PROPW.BOT**: 系統 Logo
- **STRATEGIES**: 策略管理頁面
- **ORDERS**: 訂單紀錄頁面
- **DOCS**: 說明文件

### 底部狀態列
- **BTC/USDT 價格**: 即時市場價格
  - 🟢 綠色: 價格上漲中
  - 🔴 紅色: 價格下跌中
  - ⚪ 白色: 價格持平
- **SYSTEM ACTIVE/OFFLINE**: 系統連線狀態

---

## 📈 4. 建立網格策略

### 步驟說明

1. **開啟建立表單**
   - 點擊右上角的 **「+ 建立新策略」** 按鈕

2. **填寫策略參數**

   | 參數 | 說明 | 建議值 |
   |------|------|--------|
   | 策略名稱 | 自訂識別名稱 | 例如: "BTC 震盪策略" |
   | 交易對 | 交易標的 | BTC/USDT, ETH/USDT |
   | 價格下限 | 網格最低價格 | 根據支撐位設定 |
   | 價格上限 | 網格最高價格 | 根據壓力位設定 |
   | 網格數量 | 價格區間分割數 | 建議 5-20 格 |
   | 每格投資額 | 單格掛單金額 | 視資金量調整 |

3. **查看預估資訊**
   - **網格價差**: 每格間距 (USDT 與百分比)
   - **總投資額**: 所需總資金

4. **確認建立**
   - 點擊 **「確認建立」** 按鈕
   - 策略卡片會出現在列表中，狀態為 **「已建立」**

---

## ▶️ 5. 啟動策略

### 啟動流程

1. 在策略卡片上點擊 **「啟動」** 按鈕
2. 按鈕會顯示即時進度: **「啟動中 (3/10)」**
   - 數字代表已掛出的訂單數 / 總訂單數
3. 所有訂單掛出後，狀態變為 **「運行中」**

### 自動補單機制

```
價格下跌 → 買單成交 → 自動掛上方賣單 (獲利單)
           ↓
價格上漲 → 賣單成交 → 自動掛下方買單 (回補單)
           ↓
       持續循環，低買高賣
```

---

## 📊 6. 監控與管理

### 策略卡片資訊

- **價格位置指示器**: 顯示當前價格在區間中的位置
  - 🟢 區間內: 策略正常運行
  - 🔴 低於區間: 停止買入
  - 🟡 高於區間: 停止賣出
- **投資額**: 策略使用的總資金
- **網格數**: 設定的網格層數

### 詳細資訊頁面

點擊 **「詳細資訊」** 可查看:
- 網格價格層級列表
- 訂單歷史紀錄 (狀態、價格、數量)
- 即將成交提示 (⚡ 標記)

---

## 🛑 7. 停止策略

1. 點擊策略卡片上的 **「停止」** 按鈕
2. 確認對話框中點擊 **「確認」**

> ⚠️ **重要警告**:
> - 停止策略後，機器人 **不會自動撤銷** 交易所上的掛單
> - 請務必 **手動登入 PropW 交易所**，撤銷該策略的未成交訂單
> - 否則資金會持續被佔用

---

## ❓ 常見問題

### Q: 為什麼價格顯示 "--"?
**A:** 請確認:
1. 機器人瀏覽器視窗是否開啟
2. 是否已登入 PropW 帳戶
3. 瀏覽器是否在交易頁面 (系統會自動跳轉)

### Q: 登入後為什麼沒有自動跳轉?
**A:** 系統每 3 秒檢測一次登入狀態，請稍等片刻。若超過 15 秒仍未跳轉，可嘗試手動重新整理前端頁面。

### Q: 訂單為什麼沒有成交?
**A:** 網格策略使用 **限價單** (Limit Order)，需要市場價格觸及您的掛單價格才會成交，這與市價單不同。

### Q: 如何備份策略資料?
**A:** 所有資料儲存在 `backend/propw.db`，備份此檔案即可。

### Q: 終端機出現很多錯誤訊息?
**A:** 查看日誌中的時間戳，確認錯誤發生的具體時間點。常見原因:
- 網路連線問題
- 交易所維護中
- 瀏覽器被意外關閉

---

## 📞 技術支援

如遇到無法解決的問題，請提供以下資訊:
1. 終端機視窗的錯誤訊息 (含時間戳)
2. 前端瀏覽器 Console 的錯誤訊息
3. 操作步驟描述

---

## 📝 版本更新摘要

### v2.3.0 (2025-12-06)
- 🆕 新登入流程: 點擊按鈕直接開啟登入頁面
- 🆕 自動跳轉: 登入後自動返回交易頁面
- 🆕 啟動進度: 顯示訂單建立進度 (X/Y)
- 🆕 價格顏色: 漲綠跌紅即時變化
- 🆕 日誌時間戳: 便於除錯追蹤

---

**祝您交易順利！**
